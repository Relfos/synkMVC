{{#grid.pages.0}}
<div class="col-md-12 text-center">
	<ul class="pagination">
	  {{#grid.pages}}
	  <li {{#disabled}}class="disabled"{{/disabled}}{{#selected}}class="active"{{/selected}}><a href="#" onclick="navigate('current', 'paginate', 'page={{id}}')">{{id}}{{#selected}}<span class="sr-only">(current)</span>{{/selected}}</a></li>
	  {{/grid.pages}}
	</ul>
</div>
{{/grid.pages.0}}

<div class="table-responsive">
	<table class="table table-hover">
	 <thead>
	  <tr>
		{{#grid.headers}}
			{{#visible}}
			<th>{{label}}</th>
			{{/visible}}
		{{/grid.headers}}	  
	  </tr>
	 </thead>	 
 
	 <tbody>
		{{#grid.rows}}
		  <tr>
			{{#columns}}
				{{#visible}}
				<td>
					{{#thumb}}
					<img style='width:40px; height:40px;' src="data:image/jpeg;base64,{{thumb}}" />
					{{/thumb}}
					
					{{^thumb}}
					{{maskedValue}}{{unit}}
					{{/thumb}}
				</td>
				{{/visible}}
			{{/columns }}	

			<td><a href="#" onclick="navigate('current', 'edit', 'id={{rowID}}')" class="btn btn-theme small_btn">Editar</a></td>
		  </tr>
		{{/grid.rows}}
	 
	 </tbody>
	</table>
</div>

<div class="col-md-12 text-center">		
	<form role="form" id="data_form">
	<button type="button" class="btn btn-theme" onclick="navigate('current', 'edit', 'id=0&class={{module.entity}}')">Criar</button>

	{{#grid.exports.0}}
	<button type="button" class="btn btn-theme dropdown-toggle" data-toggle="modal" data-target="#exportModal">Exportar</button>
	{{/grid.exports.0}}
	
	<button type="button" class="btn btn-theme" data-toggle="modal" data-target="#searchModal">Filtrar</button>
	{{#filter}}
	<button type="button" class="btn btn-theme" onclick="navigate('current', 'unfilter')">Limpar</button>
	{{/filter}}
	</form>
</div>


{{#grid.exports.0}}
<div id="exportModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{module.title}} - Exportação</h4>
      </div>
      <div class="modal-body">
		
		<p>Os seguintes formatos estão disponiveis para exportação de dados.</p>
		<table class="table table-hover">		
			{{#grid.exports}}
			<tr><td class="col-xs-8">{{label}}</td>
			<td class="col-xs-4"><a href="#" onclick="downloadFile('exportProgress', 'current', 'export', 'format={{format}}&class={{module.entity}}')" class="btn btn-theme small_btn">Exportar</a></td>
			{{/grid.exports}}
		</table>
		<div class="progress">
		  <div id='exportProgress' class="progress-bar progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div>
		</div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-theme" data-dismiss="modal">Fechar</button>
      </div>
    </div>

  </div>
</div>
{{/grid.exports.0}}

<script>
function searchEntity()
{
	$('#searchModal').one('hidden.bs.modal', function(){
		navigate('current', 'filter', 'class={{module.entity}}&'+gather('field_name,field_value'));
	}).modal('hide');	
}
</script>

<!-- Modal -->
<div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{module.title}} - Pesquisa</h4>
      </div>
      <div class="modal-body">
		
		<p>Some text in the modal.</p>
		<form role="form" id="search_form">
			<div class="col-xs-6">
				<div class="form-group form_row">
					<label for="field_name" class="control-label">Campo</label>
					
					<select class="form-control" id="field_name">
				{{#grid.headers}}
					<option value='{{name}}'>{{label}}</option>
				{{/grid.headers}}	  					  
					</select>				
					
					<div class="help-block with-errors"></div>
				</div>
			</div>
			
			<div class="col-xs-6">
				<div class="form-group form_row">
					<label for="field_value" class="control-label">Valor</label>
					
					<input type="text" class="form-control" id="field_value" placeholder="Insira um valor">
    					
					<div class="help-block with-errors"></div>
				</div>
			</div>
			
		</form>
        
      </div>
      <div class="modal-footer">
	  <button type="button" class="btn btn-theme" onclick="searchEntity()">Pesquisar</button>
        <button type="button" class="btn btn-theme" data-dismiss="modal">Fechar</button>
      </div>
    </div>

  </div>
</div>
